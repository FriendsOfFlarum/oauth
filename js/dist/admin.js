(()=>{var t={n:n=>{var o=n&&n.__esModule?()=>n.default:()=>n;return t.d(o,{a:o}),o},d:(n,o)=>{for(var e in o)t.o(o,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:o[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};(()=>{"use strict";t.r(n),t.d(n,{AuthSettingsPage:()=>h,ConfigureWithOAuthButton:()=>v,ConfigureWithOAuthPage:()=>_});const o=flarum.core.compat["admin/app"];var e=t.n(o);function a(t,n){return a=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},a(t,n)}function r(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n)}const i=flarum.core.compat["common/components/Button"];var s=t.n(i);const l=flarum.core.compat["admin/components/ExtensionPage"];var u=t.n(l);const f=flarum.core.compat["common/helpers/icon"];var p=t.n(f);const d=flarum.core.compat["common/utils/ItemList"];var c=t.n(d),h=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var o=n.prototype;return o.oninit=function(n){t.prototype.oninit.call(this,n),this.showing=[]},o.content=function(){return[m("div",{className:"container"},m("div",{className:"AuthSettingsPage"},m("div",{className:"Form"},this.buildSettingComponent({type:"boolean",setting:"fof-oauth.only_icons",label:e().translator.trans("fof-oauth.admin.settings.only_icons_label")}),this.buildSettingComponent({type:"boolean",setting:"fof-oauth.update_email_from_provider",label:e().translator.trans("fof-oauth.admin.settings.update_email_from_provider_label"),help:e().translator.trans("fof-oauth.admin.settings.update_email_from_provider_help")}),this.buildSettingComponent({type:"boolean",setting:"fof-oauth.fullscreenPopup",label:e().translator.trans("fof-oauth.admin.settings.fullscreen_popup_label"),help:e().translator.trans("fof-oauth.admin.settings.fullscreen_popup_help")}),this.buildSettingComponent({type:"number",setting:"fof-oauth.popupWidth",label:e().translator.trans("fof-oauth.admin.settings.popup_width_label"),help:e().translator.trans("fof-oauth.admin.settings.popup_width_help"),placeholder:580,min:0}),this.buildSettingComponent({type:"number",setting:"fof-oauth.popupHeight",label:e().translator.trans("fof-oauth.admin.settings.popup_height_label"),help:e().translator.trans("fof-oauth.admin.settings.popup_height_help"),placeholder:400,min:0}),m("hr",null),this.providerSettingsItems().toArray(),m("hr",null),m("div",{className:"AuthSettingsPage--advanced"},m("h4",null,e().translator.trans("fof-oauth.admin.settings.advanced.heading")),this.buildSettingComponent({type:"boolean",setting:"fof-oauth.log-oauth-errors",label:e().translator.trans("fof-oauth.admin.settings.advanced.log-oauth-errors-label"),help:e().translator.trans("fof-oauth.admin.settings.advanced.log-oauth-errors-help")})),this.submitButton())))]},o.providerSettingsItems=function(){var t=this,n=new(c());return e().data["fof-oauth"].map((function(o){var a=o.name,r=!!Number(t.setting("fof-oauth."+a)()),i=!!t.showing[a],l=e().forum.attribute("baseUrl")+"/auth/"+a;n.add("fof-oauth."+a,m("div",{className:"Provider "+(r?"enabled":"disabled")+" "+(i&&"showing")},m("div",{className:"Provider--info Provider--"+a},t.buildSettingComponent({type:"boolean",setting:"fof-oauth."+a,label:m("div",null,p()(o.icon),m("span",null,e().translator.trans("fof-oauth.lib.providers."+a)))}),m(s(),{className:"Button Button--rounded "+(t.showing[a]&&"active"),onclick:function(){return t.showing[a]=!i},"aria-label":e().translator.trans("fof-oauth.admin.settings_accessibility_label",{name:a})},p()("fas fa-cog"))),m("div",{className:"Provider--settings"},m("div",null,m("p",null,e().translator.trans("fof-oauth.admin.settings.providers."+a+".description",{link:m("a",{href:o.link,target:"_blank"},o.link)})),m("p",null,e().translator.trans("fof-oauth.admin.settings.providers.callback_url_text",{url:m("a",{href:l,target:"_blank"},l)})),Object.keys(o.fields).map((function(n){var r;return t.buildSettingComponent({type:"string",setting:"fof-oauth."+a+"."+n,label:e().translator.trans("fof-oauth.admin.settings.providers."+a+"."+n+"_label"),required:(r={},r[i&&o.fields[n].includes("required")?"required":null]=!0,r)})})),t.customProviderSettings(a).toArray()))))})),n},o.customProviderSettings=function(t){return new(c())},n}(u());const g=flarum.core.compat["common/components/LinkButton"];var b=t.n(g),v=function(t){function n(){return t.apply(this,arguments)||this}return r(n,t),n.prototype.view=function(){return[m(b(),{className:"Button",href:e().route("extension",{id:"fof-oauth"})},e().translator.trans("fof-oauth.admin.configure_button_label"))]},n}(b()),_=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var o=n.prototype;return o.oninit=function(n){t.prototype.oninit.call(this,n)},o.content=function(){return[m("div",{className:"container"},m("div",{className:"OAuthSettingsPage"},m("br",null),m(v,null)))]},n}(u());e().initializers.add("fof/oauth",(function(){e().extensionData.for("fof-oauth").registerPage(h)}))})(),module.exports=n})();
//# sourceMappingURL=admin.js.map