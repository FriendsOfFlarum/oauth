{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/oauth/./src/admin/components/AuthSettingsPage.js","webpack://@fof/oauth/./src/admin/components/ConfigureWithOAuthButton.js","webpack://@fof/oauth/./src/admin/components/ConfigureWithOAuthPage.js","webpack://@fof/oauth/./src/admin/extend.js","webpack://@fof/oauth/./src/admin/index.js","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@fof/oauth/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@fof/oauth/webpack/bootstrap","webpack://@fof/oauth/webpack/runtime/compat get default export","webpack://@fof/oauth/webpack/runtime/define property getters","webpack://@fof/oauth/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/oauth/webpack/runtime/make namespace object","webpack://@fof/oauth/./admin.js"],"sourcesContent":["import app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Icon from 'flarum/common/components/Icon';\nimport ItemList from 'flarum/common/utils/ItemList';\nexport default class AuthSettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    console.log('AuthSettingsPage initialized');\n    this.showing = [];\n  }\n  content() {\n    console.log('Rendering AuthSettingsPage content');\n    return [m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: \"AuthSettingsPage\"\n    }, m(\"div\", {\n      className: \"Form\"\n    }, this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-oauth.only_icons',\n      label: app.translator.trans(\"fof-oauth.admin.settings.only_icons_label\")\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-oauth.update_email_from_provider',\n      label: app.translator.trans('fof-oauth.admin.settings.update_email_from_provider_label'),\n      help: app.translator.trans('fof-oauth.admin.settings.update_email_from_provider_help')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-oauth.fullscreenPopup',\n      label: app.translator.trans('fof-oauth.admin.settings.fullscreen_popup_label'),\n      help: app.translator.trans('fof-oauth.admin.settings.fullscreen_popup_help')\n    }), this.buildSettingComponent({\n      type: 'number',\n      setting: 'fof-oauth.popupWidth',\n      label: app.translator.trans('fof-oauth.admin.settings.popup_width_label'),\n      help: app.translator.trans('fof-oauth.admin.settings.popup_width_help'),\n      placeholder: 580,\n      min: 0\n    }), this.buildSettingComponent({\n      type: 'number',\n      setting: 'fof-oauth.popupHeight',\n      label: app.translator.trans('fof-oauth.admin.settings.popup_height_label'),\n      help: app.translator.trans('fof-oauth.admin.settings.popup_height_help'),\n      placeholder: 400,\n      min: 0\n    }), m(\"hr\", null), this.providerSettingsItems().toArray(), m(\"hr\", null), m(\"div\", {\n      className: \"AuthSettingsPage--advanced\"\n    }, m(\"h4\", null, app.translator.trans('fof-oauth.admin.settings.advanced.heading')), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-oauth.log-oauth-errors',\n      label: app.translator.trans('fof-oauth.admin.settings.advanced.log-oauth-errors-label'),\n      help: app.translator.trans('fof-oauth.admin.settings.advanced.log-oauth-errors-help')\n    })), this.submitButton())))];\n  }\n  providerSettingsItems() {\n    const items = new ItemList();\n    app.data['fof-oauth'].map(provider => {\n      const {\n        name\n      } = provider;\n      const enabled = !!Number(this.setting(\"fof-oauth.\".concat(name))());\n      const showSettings = !!this.showing[name];\n      const callbackUrl = \"\".concat(app.forum.attribute('baseUrl'), \"/auth/\").concat(name);\n      items.add(\"fof-oauth.\".concat(name), m(\"div\", {\n        className: \"Provider \".concat(enabled ? 'enabled' : 'disabled', \" \").concat(showSettings && 'showing')\n      }, m(\"div\", {\n        className: \"Provider--info Provider--\".concat(name)\n      }, this.buildSettingComponent({\n        type: 'boolean',\n        setting: \"fof-oauth.\".concat(name),\n        label: m(\"div\", null, m(Icon, {\n          name: provider.icon\n        }), m(\"span\", null, app.translator.trans(\"fof-oauth.lib.providers.\".concat(name))))\n      }), m(Button, {\n        className: \"Button Button--rounded \".concat(this.showing[name] && 'active'),\n        onclick: () => this.showing[name] = !showSettings,\n        \"aria-label\": app.translator.trans('fof-oauth.admin.settings_accessibility_label', {\n          name\n        })\n      }, m(Icon, {\n        name: \"fas fa-cog\"\n      }))), m(\"div\", {\n        className: \"Provider--settings\"\n      }, m(\"div\", null, m(\"p\", null, app.translator.trans(\"fof-oauth.admin.settings.providers.\".concat(name, \".description\"), {\n        link: m(\"a\", {\n          href: provider.link,\n          target: \"_blank\"\n        }, provider.link)\n      })), m(\"p\", null, app.translator.trans(\"fof-oauth.admin.settings.providers.callback_url_text\", {\n        url: m(\"a\", {\n          href: callbackUrl,\n          target: \"_blank\"\n        }, callbackUrl)\n      })), Object.keys(provider.fields).map(field => this.buildSettingComponent({\n        type: 'string',\n        setting: \"fof-oauth.\".concat(name, \".\").concat(field),\n        label: app.translator.trans(\"fof-oauth.admin.settings.providers.\".concat(name, \".\").concat(field, \"_label\")),\n        required: {\n          [showSettings && provider.fields[field].includes('required') ? 'required' : null]: true\n        }\n      })), this.customProviderSettings(name).toArray()))));\n    });\n    return items;\n  }\n  getAvailableGroups() {\n    const groups = app.store.all('groups');\n    return groups.filter(group => !['2', '3'].includes(group.id())); // Exclude the \"Guests\" and \"Members\" groups\n  }\n  customProviderSettings(name) {\n    const items = new ItemList();\n\n    // Add group selection dropdown\n    items.add('group', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('fof-oauth.admin.settings.providers.group_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-oauth.admin.settings.providers.group_help')), (() => {\n      const groupId = this.setting(\"fof-oauth.\".concat(name, \".group\"))();\n      const selectedGroup = groupId ? app.store.getById('groups', groupId) : null;\n      const icons = {\n        1: 'fas fa-check',\n        // Admins\n        3: 'fas fa-user',\n        // Members\n        4: 'fas fa-map-pin' // Mods\n      };\n      return m(Dropdown, {\n        label: selectedGroup ? [m(Icon, {\n          name: selectedGroup.icon() || icons[selectedGroup.id()]\n        }), '\\t', selectedGroup.namePlural()] : app.translator.trans('fof-oauth.admin.settings.providers.no_group_label'),\n        buttonClassName: \"Button\",\n        disabled: !this.setting(\"fof-oauth.\".concat(name))()\n      }, m(Button, {\n        icon: \"fas fa-times\",\n        onclick: () => this.setting(\"fof-oauth.\".concat(name, \".group\"))(''),\n        active: !groupId\n      }, app.translator.trans('fof-oauth.admin.settings.providers.no_group_label')), this.getAvailableGroups().map(group => m(Button, {\n        icon: group.icon() || icons[group.id()],\n        onclick: () => this.setting(\"fof-oauth.\".concat(name, \".group\"))(group.id()),\n        active: groupId === group.id(),\n        key: group.id()\n      }, group.namePlural())));\n    })()));\n    return items;\n  }\n}\nflarum.reg.add('fof-oauth', 'admin/components/AuthSettingsPage', AuthSettingsPage);","import app from 'flarum/admin/app';\nimport LinkButton from 'flarum/common/components/LinkButton';\nexport default class ConfigureWithOAuthButton extends LinkButton {\n  view() {\n    return [m(LinkButton, {\n      className: \"Button\",\n      href: app.route('extension', {\n        id: 'fof-oauth'\n      })\n    }, app.translator.trans('fof-oauth.admin.configure_button_label'))];\n  }\n}\nflarum.reg.add('fof-oauth', 'admin/components/ConfigureWithOAuthButton', ConfigureWithOAuthButton);","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport ConfigureWithOAuthButton from './ConfigureWithOAuthButton';\n\n/**\r\n * The `ConfigureWithOAuthPage` component is meant for 3rd party extensions to provide a handy link to `fof/oauth` settings.\r\n * It is not used directly by `fof/oauth` itself.\r\n */\nexport default class ConfigureWithOAuthPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n  content() {\n    return [m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: \"OAuthSettingsPage\"\n    }, m(\"br\", null), m(ConfigureWithOAuthButton, null)))];\n  }\n}\nflarum.reg.add('fof-oauth', 'admin/components/ConfigureWithOAuthPage', ConfigureWithOAuthPage);","import app from 'flarum/admin/app';\nimport Extend from 'flarum/common/extenders';\nimport AuthSettingsPage from './components/AuthSettingsPage';\nexport default [new Extend.Admin().page(AuthSettingsPage).permission(() => ({\n  icon: 'fas fa-sign-in-alt',\n  label: app.translator.trans('fof-oauth.admin.permissions.moderate_user_providers'),\n  permission: 'moderateUserProviders'\n}), 'moderate')];","import AuthSettingsPage from './components/AuthSettingsPage';\nimport ConfigureWithOAuthPage from './components/ConfigureWithOAuthPage';\nimport ConfigureWithOAuthButton from './components/ConfigureWithOAuthButton';\nexport { default as extend } from './extend';\nexport { AuthSettingsPage, ConfigureWithOAuthPage, ConfigureWithOAuthButton };","module.exports = flarum.reg.get('core', 'admin/app');","module.exports = flarum.reg.get('core', 'admin/components/ExtensionPage');","module.exports = flarum.reg.get('core', 'common/components/Button');","module.exports = flarum.reg.get('core', 'common/components/Dropdown');","module.exports = flarum.reg.get('core', 'common/components/Icon');","module.exports = flarum.reg.get('core', 'common/components/LinkButton');","module.exports = flarum.reg.get('core', 'common/extenders');","module.exports = flarum.reg.get('core', 'common/utils/ItemList');","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\tflarum.reg._webpack_runtimes[\"fof-oauth\"] ||= __webpack_require__;// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/admin';\r\n"],"names":[],"sourceRoot":""}